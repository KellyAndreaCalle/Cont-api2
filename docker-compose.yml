version: '3.8'

services:
  # Servicio de la Base de Datos
  db:
    image: postgres:14-alpine
    container_name: dockerbdcalendario
    environment:
      - POSTGRES_DB=calendariodb
      - POSTGRES_USER=usercalendario
      - POSTGRES_PASSWORD=pwdcalendario
    volumes:
      - ./database:/docker-entrypoint-initdb.d
    networks:
      - redcalendario

  # Servicio de la API
  api:
    build: ./api/calendario-api # Ruta a la carpeta que contiene el Dockerfile
    container_name: dockerapicalendario
    depends_on:
      - db
    ports:
      - "8080:8080"
    networks:
      - redcalendario

# Definici√≥n de la red de contenedores
networks:
  redcalendario:
    driver: bridge
